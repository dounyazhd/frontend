{"ast":null,"code":"import React,{useState}from'react';import'./signIn.css';import axios from'axios';import{Helmet}from'react-helmet';import{Link,useNavigate}from'react-router-dom';import Cookies from'js-cookie';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SignIn=()=>{const[formData,setFormData]=useState({username_or_email:'',password:''});const[error,setError]=useState('');const[loading,setLoading]=useState(false);const navigate=useNavigate();const handleChange=e=>{setFormData({...formData,[e.target.name]:e.target.value});setError('');};const validateForm=()=>{const requiredFields=['username_or_email','password'];for(const key of requiredFields){if(formData[key]===''){setError('All fields are required');const errorMessageElement=document.getElementById('error-message');if(errorMessageElement){errorMessageElement.classList.add('error');}return false;}}setError('');const errorMessageElement=document.getElementById('error-message');if(errorMessageElement){errorMessageElement.classList.remove('error');}return true;};const handleSubmit=async e=>{e.preventDefault();setLoading(true);if(!validateForm()){setLoading(false);return;}try{const response=await axios.post('http://127.0.0.1:8000/signin/',formData);console.log(response.data);localStorage.setItem('isLoggedIn','true');localStorage.setItem('user_id',response.data.user_id);Cookies.set('auth_token',response.data.token);navigate('/',{replace:true});}catch(error){console.error(error.response.data);setError('Invalid username or email or password');}finally{setLoading(false);}};const handleForgotPassword=async e=>{e.preventDefault();try{const response=await axios.post('http://127.0.0.1:8000/reset-password',{email:formData.username_or_email});alert(response.data.message);}catch(error){setError('Something went wrong. Please try again later.');}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Natural Candle - Sign In\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"signin-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"video-container\",children:/*#__PURE__*/_jsxs(\"video\",{autoPlay:true,loop:true,muted:true,playsInline:true,className:\"fullscreen-video\",children:[/*#__PURE__*/_jsx(\"source\",{src:\"/images/Authentication/video-signin.mp4\",type:\"video/mp4\"}),\"Your browser does not support the video tag.\"]})}),/*#__PURE__*/_jsx(\"div\",{className:\"form-signin\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Welcome Back To Natural Candle !!\"}),/*#__PURE__*/_jsx(\"h4\",{children:\"Username / Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"username_or_email\",placeholder:\"Enter your username or email here\",onChange:handleChange}),/*#__PURE__*/_jsx(\"h4\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Enter your password\",onChange:handleChange}),error&&/*#__PURE__*/_jsx(\"p\",{id:\"error-message\",children:error}),/*#__PURE__*/_jsx(Link,{to:\"/sign_in\",className:\"forgot-password-link\",onClick:handleForgotPassword,children:\"Forgot password ?\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,children:loading?'Signing In...':'Sign In'}),/*#__PURE__*/_jsx(Link,{to:\"/sign_up\",className:\"signin-link\",children:\"Not yet have account ?\"})]})})]})]});};export default SignIn;","map":{"version":3,"names":["React","useState","axios","Helmet","Link","useNavigate","Cookies","jsx","_jsx","jsxs","_jsxs","SignIn","formData","setFormData","username_or_email","password","error","setError","loading","setLoading","navigate","handleChange","e","target","name","value","validateForm","requiredFields","key","errorMessageElement","document","getElementById","classList","add","remove","handleSubmit","preventDefault","response","post","console","log","data","localStorage","setItem","user_id","set","token","replace","handleForgotPassword","email","alert","message","children","className","autoPlay","loop","muted","playsInline","src","type","onSubmit","placeholder","onChange","id","to","onClick","disabled"],"sources":["C:/Users/DOUNYA/Desktop/SFE/frontend/src/components/Authentication/SignIn.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport './signIn.css';\r\nimport axios from 'axios';\r\nimport { Helmet } from 'react-helmet';\r\nimport {Link, useNavigate} from 'react-router-dom';\r\nimport Cookies from 'js-cookie';\r\n\r\nconst SignIn = () => {\r\n    const [formData, setFormData] = useState({\r\n        username_or_email: '',\r\n        password: ''\r\n    });\r\n\r\n    const [error, setError] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const navigate = useNavigate();\r\n\r\n    const handleChange = (e) => {\r\n        setFormData({ ...formData, [e.target.name]: e.target.value });\r\n        setError('');\r\n    };\r\n\r\n    const validateForm = () => {\r\n        const requiredFields = ['username_or_email', 'password'];\r\n        for (const key of requiredFields) {\r\n            if (formData[key] === '') {\r\n                setError('All fields are required');\r\n                const errorMessageElement = document.getElementById('error-message');\r\n                if (errorMessageElement) {\r\n                    errorMessageElement.classList.add('error');\r\n                }\r\n                return false;\r\n            }\r\n        }\r\n        setError('');\r\n        const errorMessageElement = document.getElementById('error-message');\r\n        if (errorMessageElement) {\r\n            errorMessageElement.classList.remove('error');\r\n        }\r\n        return true;\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n        setLoading(true);\r\n\r\n        if (!validateForm()) {\r\n            setLoading(false);\r\n            return;\r\n        }\r\n        try {\r\n            const response = await axios.post('http://127.0.0.1:8000/signin/', formData);\r\n            console.log(response.data);\r\n            localStorage.setItem('isLoggedIn', 'true');\r\n            localStorage.setItem('user_id', response.data.user_id);\r\n            Cookies.set('auth_token', response.data.token);\r\n\r\n            navigate('/', { replace: true });\r\n        } catch (error) {\r\n            console.error(error.response.data);\r\n            setError('Invalid username or email or password');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleForgotPassword = async (e) => {\r\n        e.preventDefault();\r\n        try {\r\n            const response = await axios.post('http://127.0.0.1:8000/reset-password',\r\n                { email: formData.username_or_email });\r\n            alert(response.data.message);\r\n        } catch (error) {\r\n            setError('Something went wrong. Please try again later.');\r\n        }\r\n    };\r\n\r\n\r\n    return (\r\n        <div>\r\n            <Helmet>\r\n                <title>Natural Candle - Sign In</title>\r\n            </Helmet>\r\n            <div className=\"signin-container\">\r\n\r\n                <div className=\"video-container\">\r\n                    <video autoPlay loop muted playsInline className=\"fullscreen-video\">\r\n                        <source src=\"/images/Authentication/video-signin.mp4\" type=\"video/mp4\"/>\r\n                        Your browser does not support the video tag.\r\n                    </video>\r\n                </div>\r\n\r\n                <div className=\"form-signin\">\r\n\r\n                    <form onSubmit={handleSubmit}>\r\n                        <h2>Welcome Back To Natural Candle !!</h2>\r\n\r\n                        <h4>Username / Email</h4>\r\n                        <input type=\"text\" name=\"username_or_email\" placeholder=\"Enter your username or email here\"\r\n                               onChange={handleChange}/>\r\n\r\n                        <h4>Password</h4>\r\n                        <input type=\"password\" name=\"password\" placeholder=\"Enter your password\"\r\n                               onChange={handleChange}/>\r\n                        {error && <p id=\"error-message\">{error}</p>}\r\n\r\n                        <Link to=\"/sign_in\" className=\"forgot-password-link\" onClick={handleForgotPassword}>Forgot password ?</Link>\r\n\r\n                        <button type=\"submit\" disabled={loading}>{loading ? 'Signing In...' : 'Sign In'}</button>\r\n                        <Link to=\"/sign_up\" className=\"signin-link\">Not yet have account ?</Link>\r\n\r\n                    </form>\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default SignIn;\r\n\r\n\r\n\r\n\r\n\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}