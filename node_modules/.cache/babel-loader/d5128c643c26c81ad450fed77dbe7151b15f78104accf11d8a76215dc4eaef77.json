{"ast":null,"code":"import React,{useState,useEffect}from'react';import'./NavBar.css';import{Link,useNavigate}from'react-router-dom';import axios from'axios';import Cookies from'js-cookie';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NavBar=()=>{const navigate=useNavigate();const[menuOpen,setMenuOpen]=useState(false);const[totalCartItems,setTotalCartItems]=useState(0);const[totalWishlistItems,setTotalWishlistItems]=useState(0);useEffect(()=>{const fetchTotals=async()=>{try{const response=await axios.get('http://localhost:8000/get_totals/');setTotalCartItems(response.data.total_carts);setTotalWishlistItems(response.data.total_wishlists);}catch(error){console.error('Failed to fetch totals:',error);}};fetchTotals();},[]);const getUserRole=async userId=>{try{const response=await axios.get(\"http://localhost:8000/read_user/\".concat(userId,\"/\"));return response.data.role;}catch(error){console.error(\"Failed to fetch user role:\",error);return null;}};const handleUserIconClick=async e=>{e.preventDefault();const userId=localStorage.getItem('user_id');if(Cookies.get('auth_token')&&userId){const role=await getUserRole(userId);if(role==='user'){navigate('/profile/personal_information');}else if(role==='admin'){navigate('/admin/performance_overview');}else{navigate('/sign_in');}}else{navigate('/sign_in');}};const isAuthenticated=Cookies.get('auth_token')&&localStorage.getItem('user_id');const toggleMenu=()=>{setMenuOpen(!menuOpen);};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"nav\",{className:\"navbar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"top\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/images/Home/logo.jpg\",alt:\"Logo\"}),/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-bars menu-icon\",onClick:toggleMenu})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bottom \".concat(menuOpen?'open':''),children:[/*#__PURE__*/_jsxs(\"ul\",{className:\"navbar-nav\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"nav-link\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/shop\",className:\"nav-link\",children:\"Shop\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/aboutus\",className:\"nav-link\",children:\"About Us\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/faqs\",className:\"nav-link\",children:\"FAQs\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item\",children:/*#__PURE__*/_jsx(Link,{to:\"/contact\",className:\"nav-link\",children:\"Contact\"})})]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"icons\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(Link,{to:\"/cart\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-shopping-cart\"}),totalCartItems>0&&/*#__PURE__*/_jsx(\"span\",{className:\"total-items\",children:totalCartItems})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(Link,{to:\"/wishlist\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-heart\"}),totalWishlistItems>0&&/*#__PURE__*/_jsx(\"span\",{className:\"total-items\",children:totalWishlistItems})]})}),/*#__PURE__*/_jsx(\"li\",{children:isAuthenticated?/*#__PURE__*/_jsx(\"a\",{href:\"/profile\",onClick:handleUserIconClick,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user\"})}):/*#__PURE__*/_jsx(Link,{to:\"/sign_in\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user\"})})})]})]})]})});};export default NavBar;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","axios","Cookies","jsx","_jsx","jsxs","_jsxs","NavBar","navigate","menuOpen","setMenuOpen","totalCartItems","setTotalCartItems","totalWishlistItems","setTotalWishlistItems","fetchTotals","response","get","data","total_carts","total_wishlists","error","console","getUserRole","userId","concat","role","handleUserIconClick","e","preventDefault","localStorage","getItem","isAuthenticated","toggleMenu","children","className","src","alt","onClick","to","href"],"sources":["C:/Users/DOUNYA/Desktop/SFE/frontend/src/components/NavBar/NavBar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport './NavBar.css';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\n\r\nconst NavBar = () => {\r\n    const navigate = useNavigate();\r\n    const [menuOpen, setMenuOpen] = useState(false);\r\n    const [totalCartItems, setTotalCartItems] = useState(0);\r\n    const [totalWishlistItems, setTotalWishlistItems] = useState(0);\r\n\r\n    useEffect(() => {\r\n        const fetchTotals = async () => {\r\n            try {\r\n                const response = await axios.get('http://localhost:8000/get_totals/');\r\n                setTotalCartItems(response.data.total_carts);\r\n                setTotalWishlistItems(response.data.total_wishlists);\r\n            } catch (error) {\r\n                console.error('Failed to fetch totals:', error);\r\n            }\r\n        };\r\n\r\n        fetchTotals();\r\n    }, []);\r\n\r\n    const getUserRole = async (userId) => {\r\n        try {\r\n            const response = await axios.get(`http://localhost:8000/read_user/${userId}/`);\r\n            return response.data.role;\r\n        } catch (error) {\r\n            console.error(\"Failed to fetch user role:\", error);\r\n            return null;\r\n        }\r\n    };\r\n\r\n    const handleUserIconClick = async (e) => {\r\n        e.preventDefault();\r\n        const userId = localStorage.getItem('user_id');\r\n        if (Cookies.get('auth_token') && userId) {\r\n            const role = await getUserRole(userId);\r\n            if (role === 'user') {\r\n                navigate('/profile/personal_information');\r\n            } else if (role === 'admin') {\r\n                navigate('/admin/performance_overview');\r\n            } else {\r\n                navigate('/sign_in');\r\n            }\r\n        } else {\r\n            navigate('/sign_in');\r\n        }\r\n    };\r\n\r\n    const isAuthenticated = Cookies.get('auth_token') && localStorage.getItem('user_id');\r\n\r\n    const toggleMenu = () => {\r\n        setMenuOpen(!menuOpen);\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <nav className=\"navbar\">\r\n                <div className=\"top\">\r\n                    <img src=\"/images/Home/logo.jpg\" alt=\"Logo\"/>\r\n                    <i className=\"fas fa-bars menu-icon\" onClick={toggleMenu}></i>\r\n                </div>\r\n                <div className={`bottom ${menuOpen ? 'open' : ''}`}>\r\n                    <ul className=\"navbar-nav\">\r\n                        <li className=\"nav-item\">\r\n                            <Link to=\"/\" className=\"nav-link\">Home</Link>\r\n                        </li>\r\n                        <li className=\"nav-item\">\r\n                            <Link to=\"/shop\" className=\"nav-link\">Shop</Link>\r\n                        </li>\r\n                        <li className=\"nav-item\">\r\n                            <Link to=\"/aboutus\" className=\"nav-link\">About Us</Link>\r\n                        </li>\r\n                        <li className=\"nav-item\">\r\n                            <Link to=\"/faqs\" className=\"nav-link\">FAQs</Link>\r\n                        </li>\r\n                        <li className=\"nav-item\">\r\n                            <Link to=\"/contact\" className=\"nav-link\">Contact</Link>\r\n                        </li>\r\n                    </ul>\r\n                    <ul className=\"icons\">\r\n\r\n                        <li>\r\n                            <Link to=\"/cart\">\r\n                                <i className=\"fas fa-shopping-cart\"></i>\r\n                                {totalCartItems > 0 && <span className=\"total-items\">{totalCartItems}</span>}\r\n                            </Link>\r\n                        </li>\r\n\r\n                        <li>\r\n                            <Link to=\"/wishlist\">\r\n                                <i className=\"fas fa-heart\"></i>\r\n                                {totalWishlistItems > 0 && <span className=\"total-items\">{totalWishlistItems}</span>}\r\n                            </Link>\r\n                        </li>\r\n\r\n                        <li>\r\n                            {isAuthenticated ? (\r\n                                <a href=\"/profile\" onClick={handleUserIconClick}>\r\n                                    <i className=\"fas fa-user\"></i>\r\n                                </a>\r\n                            ) : (\r\n                                <Link to=\"/sign_in\">\r\n                                    <i className=\"fas fa-user\"></i>\r\n                                </Link>\r\n                            )}\r\n                        </li>\r\n\r\n                    </ul>\r\n                </div>\r\n            </nav>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NavBar;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}