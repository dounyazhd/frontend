{"ast":null,"code":"import React,{useEffect,useState}from'react';import'./NavBarProfile.css';import{Link,useNavigate}from'react-router-dom';import axios from'axios';import Cookies from'js-cookie';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const NavBarProfile=()=>{const navigate=useNavigate();const[totalCartItems,setTotalCartItems]=useState(0);const[totalWishlistItems,setTotalWishlistItems]=useState(0);useEffect(()=>{const fetchTotals=async()=>{try{const response=await axios.get('http://localhost:8000/get_totals/');setTotalCartItems(response.data.total_carts);setTotalWishlistItems(response.data.total_wishlists);}catch(error){console.error('Failed to fetch totals:',error);}};fetchTotals();},[]);const getUserRole=async userId=>{try{const response=await axios.get(\"http://localhost:8000/read_user/\".concat(userId,\"/\"));return response.data.role;}catch(error){console.error(\"Failed to fetch user role:\",error);return null;}};const handleUserIconClick=async e=>{e.preventDefault();const userId=localStorage.getItem('user_id');if(Cookies.get('auth_token')&&userId){const role=await getUserRole(userId);if(role==='user'){navigate('/profile/personal_information');}else if(role==='admin'){navigate('/admin/performance_overview');}else{navigate('/sign_in');}}else{navigate('/sign_in');}};return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"nav\",{className:\"navbar-profile\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bottom-profile\",children:[/*#__PURE__*/_jsxs(\"ul\",{className:\"navbar-nav-profile\",children:[/*#__PURE__*/_jsx(\"li\",{className:\"nav-item-profile\",children:/*#__PURE__*/_jsx(Link,{to:\"/\",className:\"nav-link\",children:\"Home\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item-profile\",children:/*#__PURE__*/_jsx(Link,{to:\"/shop\",className:\"nav-link\",children:\"Shop\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item-profile\",children:/*#__PURE__*/_jsx(Link,{to:\"/aboutus\",className:\"nav-link\",children:\"About Us\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item-profile\",children:/*#__PURE__*/_jsx(Link,{to:\"/faqs\",className:\"nav-link\",children:\"FAQs\"})}),/*#__PURE__*/_jsx(\"li\",{className:\"nav-item-profile\",children:/*#__PURE__*/_jsx(Link,{to:\"/contact\",className:\"nav-link\",children:\"Contact\"})})]}),/*#__PURE__*/_jsxs(\"ul\",{className:\"icons-profile\",children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(Link,{to:\"/cart\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-shopping-cart\"}),totalCartItems>0&&/*#__PURE__*/_jsx(\"span\",{className:\"total-items\",children:totalCartItems})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(Link,{to:\"/wishlist\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-heart\"}),totalWishlistItems>0&&/*#__PURE__*/_jsx(\"span\",{className:\"total-items\",children:totalWishlistItems})]})}),/*#__PURE__*/_jsx(\"li\",{style:{pointerEvents:'none'},children:/*#__PURE__*/_jsx(Link,{to:\"/profile\",onClick:handleUserIconClick,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-user\",style:{color:'#9E5AC7'}})})})]})]})})});};export default NavBarProfile;","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","axios","Cookies","jsx","_jsx","jsxs","_jsxs","NavBarProfile","navigate","totalCartItems","setTotalCartItems","totalWishlistItems","setTotalWishlistItems","fetchTotals","response","get","data","total_carts","total_wishlists","error","console","getUserRole","userId","concat","role","handleUserIconClick","e","preventDefault","localStorage","getItem","children","className","to","style","pointerEvents","onClick","color"],"sources":["C:/Users/DOUNYA/Desktop/SFE/frontend/src/components/NavBarProfile/NavBarProfile.js"],"sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport './NavBarProfile.css';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport Cookies from 'js-cookie';\r\n\r\nconst NavBarProfile = () => {\r\n    const navigate = useNavigate();\r\n    const [totalCartItems, setTotalCartItems] = useState(0);\r\n    const [totalWishlistItems, setTotalWishlistItems] = useState(0);\r\n\r\n    useEffect(() => {\r\n        const fetchTotals = async () => {\r\n            try {\r\n                const response = await axios.get('http://localhost:8000/get_totals/');\r\n                setTotalCartItems(response.data.total_carts);\r\n                setTotalWishlistItems(response.data.total_wishlists);\r\n            } catch (error) {\r\n                console.error('Failed to fetch totals:', error);\r\n            }\r\n        };\r\n\r\n        fetchTotals();\r\n    }, []);\r\n\r\n    const getUserRole = async (userId) => {\r\n        try {\r\n            const response = await axios.get(`http://localhost:8000/read_user/${userId}/`);\r\n            return response.data.role;\r\n        } catch (error) {\r\n            console.error(\"Failed to fetch user role:\", error);\r\n            return null;\r\n        }\r\n    };\r\n\r\n    const handleUserIconClick = async (e) => {\r\n        e.preventDefault();\r\n        const userId = localStorage.getItem('user_id');\r\n        if (Cookies.get('auth_token') && userId) {\r\n            const role = await getUserRole(userId);\r\n            if (role === 'user') {\r\n                navigate('/profile/personal_information');\r\n            } else if (role === 'admin') {\r\n                navigate('/admin/performance_overview');\r\n            } else {\r\n                navigate('/sign_in');\r\n            }\r\n        } else {\r\n            navigate('/sign_in');\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <nav className=\"navbar-profile\">\r\n                <div className=\"bottom-profile\">\r\n                    <ul className=\"navbar-nav-profile\">\r\n                        <li className=\"nav-item-profile\">\r\n                            <Link to=\"/\" className=\"nav-link\">Home</Link>\r\n                        </li>\r\n                        <li className=\"nav-item-profile\">\r\n                            <Link to=\"/shop\" className=\"nav-link\">Shop</Link>\r\n                        </li>\r\n                        <li className=\"nav-item-profile\">\r\n                            <Link to=\"/aboutus\" className=\"nav-link\">About Us</Link>\r\n                        </li>\r\n                        <li className=\"nav-item-profile\">\r\n                            <Link to=\"/faqs\" className=\"nav-link\">FAQs</Link>\r\n                        </li>\r\n                        <li className=\"nav-item-profile\">\r\n                            <Link to=\"/contact\" className=\"nav-link\">Contact</Link>\r\n                        </li>\r\n                    </ul>\r\n                    <ul className=\"icons-profile\">\r\n\r\n                        <li>\r\n                            <Link to=\"/cart\">\r\n                                <i className=\"fas fa-shopping-cart\"></i>\r\n                                {totalCartItems > 0 && <span className=\"total-items\">{totalCartItems}</span>}\r\n                            </Link>\r\n                        </li>\r\n\r\n                        <li>\r\n                            <Link to=\"/wishlist\">\r\n                                <i className=\"fas fa-heart\"></i>\r\n                                {totalWishlistItems > 0 && <span className=\"total-items\">{totalWishlistItems}</span>}\r\n                            </Link>\r\n                        </li>\r\n\r\n                        <li style={{pointerEvents: 'none'}}>\r\n                            <Link to=\"/profile\" onClick={handleUserIconClick}>\r\n                                <i className=\"fas fa-user\" style={{color: '#9E5AC7'}}></i>\r\n                            </Link>\r\n                        </li>\r\n                    </ul>\r\n                </div>\r\n            </nav>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default NavBarProfile;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}